
{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}
<form method="POST" id="search_hotel_block_form" class="grid">
    {% if location_enabled %}
        <div class="form-group area-{{ column_widths.location }}">
            <input type="text" class="form-control header-rmsearch-input input-location" id="hotel_location" name="hotel_location" autocomplete="off" placeholder="{% trans 'Hotel location' %}" {% if search_data %}value="{{ search_data.location|escape }}" {% endif %}>
            <input hidden="hidden" name="location_category_id" id="location_category_id" {% if search_data %}value="{{ search_data.location_category_id|escape }}" {% endif %}>
            <div class="dropdown">
                <ul class="location_search_results_ul dropdown-menu"></ul>
            </div>
        </div>
    {% endif %}
    {% if hotels_info|length <= 1 and not show_hotel_name %}
        <input type="hidden" id="max_order_date" name="max_order_date" value="{% if hotels_info.0.max_order_date %}{{ hotels_info.0.max_order_date|escape }}{% endif %}">
        <input type="hidden" id="preparation_time" name="preparation_time" value="{% if hotels_info.0.preparation_time %}{{ hotels_info.0.preparation_time|escape }}{% endif %}">
        <input type="hidden" id="hotel_cat_id" name="hotel_cat_id" value="{{ hotels_info.0.id_category }}">
        <input type="hidden" id="id_hotel" name="id_hotel" value="{{ hotels_info.0.id|escape }}">
        <input type="hidden" id="htl_name" class="form-control header-rmsearch-input" value="{{ hotels_info.0.hotel_name }}" readonly>
    {% else %}
        <div class="form-group area-{{ column_widths.hotel }}">
            {% if hotels_info and hotels_info|length %}
                <div class="dropdown">
                    <input type="hidden" id="hotel_cat_id" name="hotel_cat_id" {% if search_data %}value="{{ search_data.htl_dtl.id_category|escape }}"{% endif %}>
                    <input type="hidden" id="id_hotel" name="id_hotel" {% if search_data %}value="{{ search_data.htl_dtl.id|escape }}"{% endif %}>
                    <input type="hidden" id="max_order_date" name="max_order_date" value="{% if max_order_date %}{{ max_order_date|escape }}{% endif %}">
                    <input type="hidden" id="preparation_time" name="preparation_time" value="{% if preparation_time %}{{ preparation_time|escape }}{% endif %}">

                    <button class="form-control header-rmsearch-input input-hotel {% if error == 1 %}error_border{% endif %}" type="button" data-toggle="dropdown" id="id_hotel_button">
                        {% if search_data %}
                            <span id="hotel_cat_name" class="pull-left">{{ search_data.htl_dtl.hotel_name|escape }}</span>
                        {% else %}
                            <span id="hotel_cat_name" class="pull-left">{% trans 'Select Hotel' %}</span>
                        {% endif %}
                    </button>
                    <ul class="dropdown-menu hotel_dropdown_ul">
                        {% if hotels_info %}
                            {% for name_val in hotels_info %}
                                <li tabindex="-1" class="search_result_li" data-id-hotel="{{ name_val.id|escape }}" data-hotel-cat-id="{{ name_val.id_category|escape }}" data-max_order_date="{{ name_val.max_order_date }}" data-preparation_time="{{ name_val.preparation_time|escape }}">{{ name_val.hotel_name|escape }}</li>
                            {% endfor %}
                        {% endif %}
                    </ul>
                </div>
            {% endif %}
        </div>
    {% endif %}
    {% if multiple_dates_input %}
        <div class="grid area-{{ column_widths.date }}" id="daterange_value">
            <div class="form-group">
                <input type="hidden" id="check_in_time" name="check_in_time" {% if search_data %}value="{{ search_data.date_from|escape }}"{% endif %}>
                <div class="form-control header-rmsearch-input input-date" autocomplete="off" id="daterange_value_from" placeholder="{% trans 'Check-in' %}"><span>{% trans 'Check-in' %}</span></div>
            </div>
            <div class="form-group">
                <input type="hidden" id="check_out_time" name="check_out_time" {% if search_data %}value="{{ search_data.date_to|escape }}"{% endif %}>
                <div class="form-control header-rmsearch-input input-date" autocomplete="off" id="daterange_value_to" placeholder="{% trans 'Check-out' %}"><span>{% trans 'Check-out' %}</span></div>
            </div>
        </div>
    {% else %}
        <div class="form-group area-{{ column_widths.date }}">
            <input type="hidden" id="check_in_time" name="check_in_time" {% if search_data %}value="{{ search_data.date_from|escape }}"{% endif %}>
            <input type="hidden" id="check_out_time" name="check_out_time" {% if search_data %}value="{{ search_data.date_to|escape }}"{% endif %}>
            <div class="form-control header-rmsearch-input input-date" id="daterange_value"  autocomplete="off" placeholder="{% trans 'Check-in - Check-out' %}"><span>{% trans 'Check-in' %} &nbsp;<i class="icon icon-minus"></i>&nbsp; {% trans 'Check-out' %}</span></div>
        </div>
    {% endif %}

    {% if is_occupancy_wise_search %}
        <div class="form-group area-{{ column_widths.occupancy }}">
            <div class="dropdown">
                <button class="form-control input-occupancy header-rmsearch-input {% if error == 1 %}error_border{% endif %}" type="button" data-toggle="dropdown" id="guest_occupancy">
                    <span class="pull-left">{% if search_data.occupancy_adults and search_data.occupancy_adults %}{{ search_data.occupancy_adults }} {% if search_data.occupancy_adults > 1 %}{% trans 'Adults' %}{% else %}{% trans 'Adult' %}{% endif %}, {% endif %}{% if search_data.occupancy_children and search_data.occupancy_children %}{{ search_data.occupancy_children }} {% if search_data.occupancy_children > 1 %}{% trans 'Children' %}{% else %}{% trans 'Child' %}{% endif %}, {% endif %}{{ search_data.occupancies|count }} {% if search_data.occupancies|count > 1 %}{% trans 'Rooms' %}{% else %}{% trans 'Room' %
                    } {% else %}{% trans '1 Adult, 1 Room' %}{% endif %}</span>
                </button>
                <div id="search_occupancy_wrapper" class="dropdown-menu">
                    <div id="occupancy_inner_wrapper">
                        {% if search_data.occupancies and search_data.occupancies %}
                            {% set countRoom = 1 %}
                            {% for key, occupancy in search_data.occupancies.items %}
                                <div class="occupancy-room-block">
                                    <div class="occupancy_info_head"><span class="room_num_wrapper">{% trans 'Room' %} - {{ countRoom|escape }}</span>{% if not forloop.first %}<a class="remove-room-link pull-right" href="#">{% trans 'Remove' %}</a>{% endif %}</div>
                                    <div class="occupancy_info_block" occ_block_index="{{ key|escape }}">
                                        <div class="row">
                                            <div class="form-group occupancy_count_block col-sm-5 col-xs-6">
                                                <label>{% trans 'Adults' %}</label>
                                                <div>
                                                    <input type="hidden" class="num_occupancy num_adults room_occupancies" name="occupancy[{{ key|escape }}][adults]" value="{{ occupancy.adults|escape }}">
                                                    <div class="occupancy_count pull-left">
                                                        <span>{{ occupancy.adults|escape }}</span>
                                                    </div>
                                                    <div class="qty_direction pull-left">
                                                        <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_up">
                                                            <span><i class="icon-plus"></i></span>
                                                        </a>
                                                        <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_down">
                                                            <span><i class="icon-minus"></i></span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group occupancy_count_block col-sm-7 col-xs-6">
                                                <label>{% trans 'Children' %}</label>
                                                <div class="clearfix">
                                                    <input type="hidden" class="num_occupancy num_children room_occupancies" name="occupancy[{{ key|escape }}][children]" value="{{ occupancy.children|escape }}">
                                                    <div class="occupancy_count pull-left">
                                                        <span>{{ occupancy.children|escape }}</span>
                                                    </div>
                                                    <div class="qty_direction pull-left">
                                                        <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_up">
                                                            <span><i class="icon-plus"></i></span>
                                                        </a>
                                                        <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_down">
                                                            <span><i class="icon-minus"></i></span>
                                                        </a>
                                                    </div>
                                                </div>
                                                <p class="label-desc-txt">({% trans 'Below' %}  {{ max_child_age|escape }} {% trans 'years' %})</p>
                                            </div>
                                        </div>
                                        <p style="display:none;"><span class="text-danger occupancy-input-errors"></span></p>

                                        <div class="row">
                                            <div class="form-group children_age_info_block col-sm-12" {% if occupancy.child_ages and occupancy.child_ages %}style="display:block;"{% endif %}>
                                                <label>{% trans 'All Children' %}</label>
                                                <div class="children_ages">
                                                    {% if occupancy.child_ages and occupancy.child_ages %}
                                                        {% for childAge in occupancy.child_ages %}
                                                            <div>
                                                                <select class="guest_child_age room_occupancies" name="occupancy[{{ key|escape }}][child_ages][]">
                                                                    <option value="-1" {% if childAge == -1 %}selected{% endif %}>{% trans 'Select 1' %}</option>
                                                                    <option value="0" {% if childAge == 0 %}selected{% endif %}>{% trans 'Under 1' %}</option>
                                                                    {% for age in range(1, max_child_age) %}
                                                                        <option value="{{ age|escape }}" {% if childAge == age %}selected{% endif %}>{{ age|escape }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        {% endfor %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="occupancy-info-separator">
                                </div>
                                {% set countRoom = countRoom+1 %}
                            {% endfor %}
                        {% else %}
                            <div class="occupancy-room-block">
                                <div class="occupancy_info_head"><span class="room_num_wrapper">{% trans 'Room - 1' %}</span></div>
                                <div class="occupancy_info_block" occ_block_index="0">
                                    <div class="row">
                                        <div class="form-group occupancy_count_block col-sm-5 col-xs-6">
                                            <label>{% trans 'Adults' %}</label>
                                            <div>
                                                <input type="hidden" class="num_occupancy num_adults room_occupancies" name="occupancy[0][adults]" value="1">
                                                <div class="occupancy_count pull-left">
                                                    <span>1</span>
                                                </div>
                                                <div class="qty_direction pull-left">
                                                    <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_up">
                                                        <span>
                                                            <i class="icon-plus"></i>
                                                        </span>
                                                    </a>
                                                    <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_down">
                                                        <span>
                                                            <i class="icon-minus"></i>
                                                        </span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group occupancy_count_block col-sm-7 col-xs-6">
                                            <label>{% trans 'Children' %}</label>
                                            <div class="clearfix">
                                                <input type="hidden" class="num_occupancy num_children room_occupancies" name="occupancy[0][children]" value="0">
                                                <div class="occupancy_count pull-left">
                                                    <span>0</span>
                                                </div>
                                                <div class="qty_direction pull-left">
                                                    <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_up">
                                                        <span>
                                                            <i class="icon-plus"></i>
                                                        </span>
                                                    </a>
                                                    <a href="#" data-field-qty="qty" class="btn btn-default occupancy_quantity_down">
                                                        <span>
                                                            <i class="icon-minus"></i>
                                                        </span>
                                                    </a>
                                                </div>
                                            </div>
                                            <p class="label-desc-txt">({% trans 'Below' %}  {{ max_child_age|escape }} {% trans 'years' %})</p>
                                        </div>
                                    </div>
                                    <p style="display:none;"><span class="text-danger occupancy-input-errors
                                    </span></p>
                                    <div class="row">
                                        <div class="form-group children_age_info_block col-sm-12">
                                            <label>{% trans 'All Children' %}</label>
                                            <div class="children_ages">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr class="occupancy-info-separator">
                            </div>
                        {% endif %}
                    </div>
                    <div id="add_new_occupancy">
                        <a class="add_new_occupancy_btn" href="#"><i class="icon-plus"></i> <span>{% trans 'Add Room' %}</span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endif %}
<div class="form-group search_room_submit_block area-{{ column_widths.search }}">
    <button type="submit" class="btn btn btn-primary pull-right" name="search_room_submit" id="search_room_submit">
        <span>{% trans 'Search Rooms' %}</span>
    </button>
</div>
</form>


{% endblock content %}